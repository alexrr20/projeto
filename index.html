<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TEST TEST TEST</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>
  </head>
  <body class="light">
    <img src="logo2.svg" alt="logo" id="logo">
    <input type="text" class="inpUser"></input>
    <button type="submit" class="btnSubmit">Add Account</button>
    <button type="submit" class="btnSubmit">Add All Accounts</button>
    <button type="reset" class="btnRemove">Remove Account</button>
    <button type="reset" class="btnRemove">Remove All Accounts</button>
    <button type="submit" class="btnSubmit">LOGIN</button>
    <a id="btnLight" href="#">Light Theme</a>
    <a id="btnDark" href="#">Dark Theme</a>
    <script>
      let btnSubmit = document.querySelectorAll(".btnSubmit");
      let btnRemove = document.querySelectorAll(".btnRemove");
      let btnLight = document.querySelectorAll("#btnLight")
      let btnDark = document.querySelectorAll("#btnDark")
      let imgLogo = document.querySelectorAll("#logo")
      let body = document.body;

      btnDark[0].addEventListener("click",()=>{
        body.classList.replace("light","dark")
        imgLogo[0].src="logo.svg"
      })

      btnLight[0].addEventListener("click",()=>{
        body.classList.replace("dark","light")
        imgLogo[0].src="logo2.svg"
      })

      let User = function(username){
        let obj = {}
        obj.username = username;
        obj.hello = function(){
          console.log("Hello")
        }

        return obj
      }

      btnSubmit[0].addEventListener("click", function () {
        let lsUser = JSON.parse(localStorage.getItem("User"));
        let inpUser = document.querySelectorAll(".inpUser")
        let userAdd = inpUser[0].value
        let newUser = User(userAdd)
        
        if (!lsUser){
          let arrayAdd = [newUser]
          localStorage.setItem("User", JSON.stringify(arrayAdd))
        } else {
          lsUser.push(newUser)
          localStorage.setItem("User", JSON.stringify(lsUser))
        }
      })

      btnRemove[0].addEventListener("click", function () {
        let lsUser = JSON.parse(localStorage.getItem("User"));
        let inpUser = document.querySelectorAll(".inpUser");
        let userRemove = inpUser[0].value;
        let indexRemove = lsUser.indexOf(userRemove)

        lsUser.splice(indexRemove, 1);
        if (!(userRemove.length) || indexRemove == -1){
            alert("Esta conta n√£o existe! Tente de novo")
            return
        } else if (!(lsUser.length)){
            localStorage.removeItem("User")
        } else {
            localStorage.setItem("User", JSON.stringify(lsUser))
        }
      });

      btnRemove[1].addEventListener("click", function () {
        localStorage.removeItem("User");
      });

      btnSubmit[2].addEventListener("click", function(){
        let lsUser = JSON.parse(localStorage.getItem("User"))
        let inpUser = document.querySelectorAll(".inpUser")
        let userLogin = inpUser[0].value

        for(let i = 0; i<lsUser.length;i++){
          if(lsUser[i].username == userLogin){
            localStorage.setItem("Logged In",JSON.stringify(lsUser[i]))
          }
        }
      })
      
    </script>
  </body>
</html>
